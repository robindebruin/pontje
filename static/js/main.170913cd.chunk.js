(this.webpackJsonppontje=this.webpackJsonppontje||[]).push([[0],{37:function(e,t,n){e.exports=n(71)},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(29),o=n.n(c),i=(n(42),n(43),n(10)),u=n(11),s=n(35),l=n(30),m=n(36),d=(n(44),n(7)),f=function(){function e(t,n,a){Object(i.a)(this,e),this.name=t,this.url=n,this.fullName=a}return Object(u.a)(e,[{key:"destinations",get:function(){return this.dest},set:function(e){this.dest=e}},{key:"allDepartureTimes",get:function(){return""}}]),e}(),v=new f("Pont steiger","pont-steiger","Pontsteiger"),p=new f("Centraal","centraal","Centraal Station"),b=new f("NDSM","ndsm","NDSM");b.destinations=[{port:p,lines:["905_NDSM_CS","906_NDSM_CS"]},{port:v,lines:["903_NDSM_PST"]}],v.destinations=[{port:b,lines:["903_PST_NDSM"]}],p.destinations=[{port:b,lines:["906_CS_NDSM","905_CS_NDSM"]}];var j=[b,v,p],E={backgroundColor:"var(--color-2)",color:"var(--color-3)",padding:"0.1em 0 0 0.5em",fontVariantCaps:"all-small-caps"};var O=function(e){var t=e.title;return r.a.createElement("div",{style:E},r.a.createElement("div",null," ",t))};var y=function(e){var t=e.departurePort;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{title:"Vertrek"}),r.a.createElement("div",{className:"departure"},j.map((function(e){return r.a.createElement("div",{key:e.name,className:"departure-link ".concat((n=e.name,n===(null===t||void 0===t?void 0:t.name)&&"departure-active"))},r.a.createElement(d.b,{to:"/".concat(e.url)},e.name));var n}))))},h=n(8),g=(n(50),n(13)),S=n(14),k=n(33),N=n(4),D=(n(51),function(){function e(){Object(i.a)(this,e)}return Object(u.a)(e,null,[{key:"getTheTime",value:function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}},{key:"timeToDateObj",value:function(e){var t=e.split(":"),n=Object(N.a)(t,3),a=n[0],r=n[1],c=n[2],o=new Date;return o.setHours(+a),o.setMinutes(+r),o.setSeconds(+c),o}},{key:"msToHMS",value:function(e){return new Date(e).toISOString().slice(11,19)}},{key:"getDayType",value:function(){var e=(new Date).getDay()-1,t=[];return e<6&&t.push("weekdays"),[].concat(t,[["monday","tuesday","wednesday","thursday","friday","saturday","sunday"][e]])}},{key:"stripSeconds",value:function(e){var t=e.split(":"),n=Object(N.a)(t,2),a=n[0],r=n[1];return"".concat(a,":").concat(r)}},{key:"stripHours",value:function(e){if(e){var t=e.split(":"),n=Object(N.a)(t,3),a=(n[0],n[1]),r=n[2];return"".concat(a,":").concat(r)}}}]),e}());var w=function(e){e.destinationPortName;var t=e.depTimes,n=e.closestTimeIndex,a=void 0===n?0:n;return t?r.a.createElement("div",{className:"ferry-times"},t.slice(a).map((function(e){return r.a.createElement("div",{key:e},D.stripSeconds(e))}))):r.a.createElement(r.a.Fragment,null)};var T=function(e){var t=e.props;return r.a.createElement("div",t,"Loading..")};function C(e,t,n){var a=function(e,t){return e.find((function(e){return e.name===t}))}(function(e,t){return Object.keys(e).map((function(n){return{name:n,value:e[n].findIndex((function(e){return e>t}))}}))}(t,n),e);return a?a.value:0}n(52);var M=function(e){var t=e.lines;return r.a.createElement("div",{className:"meta-info"},r.a.createElement("div",null,D.getDayType().map((function(e){return e+", "})),t&&t.map((function(e){return"".concat(e,", ")}))))},_={backgroundColor:"var(--color-1)",color:"var(--color-3)",padding:"0 0 0 0.5em",fontVariantCaps:"all-small-caps"};var P=function(e){var t=e.title;return r.a.createElement("div",{style:_},r.a.createElement("div",null," ",t))},x=n(18),I=n.n(x),H=n(34),F=n.n(H).a.create({baseURL:"/pontje",timeout:1e3});var L=function(){var e=Object(a.useState)(),t=Object(N.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)("LOADING"),o=Object(N.a)(c,2),i=o[0],u=o[1];return[n,i,Object(a.useCallback)((function(e){var t;return I.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,u("LOADING"),n.next=4,I.a.awrap(F.get(e));case 4:t=n.sent,u("SUCCESS"),r(t.data),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),console.error(n.t0),u("ERROR");case 13:case"end":return n.stop()}}),null,null,[[0,9]])}),[])]};var R=function(e){var t,n=e.departurePort,c=e.destinationPort,o=Object(a.useState)(),i=Object(N.a)(o,2),u=i[0],s=i[1],l=Object(a.useState)(D.getTheTime()),m=Object(N.a)(l,2),f=m[0],v=m[1],p=L(),b=Object(N.a)(p,3),j=b[0],E=(b[1],b[2]),O=Object(a.useState)([]),y=Object(N.a)(O,2),h=y[0],_=y[1];return Object(a.useEffect)((function(){_([]),n.destinations.flatMap((function(e){return e.lines})).forEach((function(e){return E("/ferry-times/".concat(e,".json"))}))}),[n,E]),Object(a.useEffect)((function(){var e;n.destinations.forEach((function(t){var n=function(e,t){return t.filter((function(t){return t.journey.destination.fullname===e.port.fullName}))}(t,h);e=Object(k.a)({},e,Object(S.a)({},t.port.name,function(e,t){return e.reduce((function(e,n){var a=n.schedules.filter((function(e){return t.some((function(t){return e.validFor.includes(t)}))})).map((function(e){return e.times})).map((function(e){return e.map((function(e){return e.departure}))}));return[].concat(Object(g.a)(e),Object(g.a)(a.flat()))}),[])}(n,D.getDayType())))})),s(e)}),[h,n]),Object(a.useEffect)((function(){j&&_((function(e){return[].concat(Object(g.a)(e),[j])}))}),[j,_]),setInterval((function(){v(D.getTheTime())}),1e3),u?r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{title:"Bestemming"}),n.destinations.map((function(e){return r.a.createElement("div",{className:"destination-port",key:e.port.name},r.a.createElement("div",{className:"destination-row-inner-left ".concat((t=e.port.name,t===(null===c||void 0===c?void 0:c.name)&&"destination-active"))},r.a.createElement(d.b,{to:"/".concat(n.url,"/").concat(e.port.url)},e.port.name)),r.a.createElement("div",{className:"destination-row-inner-right"},D.stripHours(function(e,t,n){var a=C(e,t,n);if(a&&!(a<0))return D.msToHMS(Math.abs(D.timeToDateObj(t[e][a])-D.timeToDateObj(n)))}(e.port.name,u,f)),r.a.createElement("sup",null," minuten")));var t})),r.a.createElement(w,{destinationPortName:null===c||void 0===c?void 0:c.name,depTimes:u[null===c||void 0===c?void 0:c.name],closestTimeIndex:C(null===c||void 0===c?void 0:c.name,u,f)}),r.a.createElement(M,{lines:null===(t=n.destinations.find((function(e){return e.port===c})))||void 0===t?void 0:t.lines})):r.a.createElement("div",{className:"destination-port destination-port__loading "},r.a.createElement(T,null))};var B=Object(h.f)((function(e){var t=e.match.params,n=t.dep,a=t.des,c=j.find((function(e){return n===e.url})),o=j.find((function(e){return a===e.url}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(y,{departurePort:c}),r.a.createElement(R,{departurePort:c,destinationPort:o}))})),V=[{path:"/",exact:!0,component:y},{path:"/:dep/:des",exact:!1,component:B},{path:"/:dep",exact:!1,component:B}],A=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(h.c,null,V.map((function(e){return r.a.createElement(h.a,Object.assign({},e,{key:e.path}))})))}}]),t}(a.Component);var G=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"section"},r.a.createElement(A,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(d.a,{basename:"/pontje"},r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.170913cd.chunk.js.map