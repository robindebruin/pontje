(this.webpackJsonppontje=this.webpackJsonppontje||[]).push([[0],{23:function(e,t,n){e.exports=n(39)},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),i=n.n(o),c=(n(28),n(29),n(5)),u=n(6),l=n(21),s=n(17),m=n(22),d=(n(30),n(3)),f=function(){function e(t,n){Object(c.a)(this,e),this.name=t,this.url=n}return Object(u.a)(e,[{key:"destinations",get:function(){return this.dest},set:function(e){this.dest=e}},{key:"allDepartureTimes",get:function(){return""}}]),e}(),v=new f("Pont steiger","pont-steiger"),p=new f("Centraal","centraal"),E=new f("NDSM","ndsm");E.destinations=[{port:p,lines:["905_NDM_CS","906_NDSM_CS"]},{port:v,lines:["903_NDSM_PST"]}],v.destinations=[{port:E,lines:["903_PST_NDSM"]}],p.destinations=[{port:E,lines:["906_CS_NDSM","905_CS_NDSM"]}];var h=[E,v,p],y={backgroundColor:"var(--color-2)",color:"var(--color-3)",padding:"0.1em 0 0 0.5em",fontVariantCaps:"all-small-caps"};var b=function(e){var t=e.title;return r.a.createElement("div",{style:y},r.a.createElement("div",null," ",t))};var g=function(e){var t=e.departurePort;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{title:"Vertrek haven"}),r.a.createElement("div",{className:"departure"},h.map((function(e){return r.a.createElement("div",{key:e.name,className:"departure-link ".concat((n=e.name,n===(null===t||void 0===t?void 0:t.name)&&"departure-active"))},r.a.createElement(d.b,{to:"/".concat(e.url)},e.name));var n}))))},j=n(4),O=(n(36),n(9)),k=n(20),T=n(8);n(37);var S=function(e){var t=e.depTimes,n=e.closestTimeIndex,a=void 0===n?0:n;return t?r.a.createElement("div",{className:"ferry-times"},t.slice(a).map((function(e){return r.a.createElement("div",{key:e},e)}))):r.a.createElement(r.a.Fragment,null)},w=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,null,[{key:"getTheTime",value:function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}},{key:"timeToDateObj",value:function(e){var t=e.split(":"),n=Object(T.a)(t,3),a=n[0],r=n[1],o=n[2],i=new Date;return i.setHours(+a),i.setMinutes(+r),i.setSeconds(+o),i}},{key:"msToHMS",value:function(e){return new Date(e).toISOString().slice(11,19)}},{key:"getDayType",value:function(){var e=(new Date).getDay()-1,t=[];return e<6&&t.push("weekdays"),[].concat(t,[["monday","tuesday","wednesday","thursday","friday","saturday","sunday"][e]])}}]),e}();var D=function(e){var t=e.props;return r.a.createElement("div",t,"Loading..")},N=n(13);function _(e,t,n){var a=function(e,t){return e.find((function(e){return e.name===t}))}(function(e,t){return Object.keys(e).map((function(n){return{name:n,value:e[n].findIndex((function(e){return e>t}))}}))}(t,n),e);return a?a.value:0}n(38);var M=function(e){var t=e.lines;return r.a.createElement("div",{className:"meta-info"},r.a.createElement("div",null,w.getDayType().map((function(e){return e+", "})),t&&t.map((function(e){return"".concat(e,", ")}))))},C={backgroundColor:"var(--color-1)",color:"var(--color-3)",padding:"0 0 0 0.5em",fontVariantCaps:"all-small-caps"};var P=function(e){var t=e.title;return r.a.createElement("div",{style:C},r.a.createElement("div",null," ",t))};var x=function(e){var t,n=e.departurePort,o=e.destinationPort,i=Object(a.useState)(),c=Object(T.a)(i,2),u=c[0],l=c[1],s=Object(a.useState)(w.getTheTime()),m=Object(T.a)(s,2),f=m[0],v=m[1];return Object(a.useEffect)((function(){n.destinations.forEach((function(e){Promise.all(e.lines.map((function(e){return t=e,fetch("".concat("/pontje","/ferry-times/").concat(t,".json")).then((function(e){return e.json()}));var t}))).then((function(t){return l((function(n){return Object(k.a)({},n,{},Object(O.a)({},"".concat(e.port.name),function(e,t){return e.reduce((function(e,n){var a=n.schedules.filter((function(e){return t.some((function(t){return e.validFor.includes(t)}))})).map((function(e){return e.times})).map((function(e){return e.map((function(e){return e.departure}))}));return[].concat(Object(N.a)(e),Object(N.a)(a.flat()))}),[])}(t,w.getDayType())))}))})).catch((function(e){return console.error(e)}))}))}),[n]),setInterval((function(){v(w.getTheTime())}),1e3),u?r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{title:"Bestemming"}),n.destinations.map((function(e){return r.a.createElement("div",{className:"destination-port",key:e.port.name},r.a.createElement("div",{className:"destination-row-inner-left ".concat((t=e.port.name,t===(null===o||void 0===o?void 0:o.name)&&"destination-active"))},r.a.createElement(d.b,{to:"/".concat(n.url,"/").concat(e.port.url)},e.port.name)),r.a.createElement("div",{className:"destination-row-inner-right"},function(e,t,n){var a=_(e,t,n);if(a&&!(a<0))return w.msToHMS(Math.abs(w.timeToDateObj(t[e][a])-w.timeToDateObj(n)))}(e.port.name,u,f)));var t})),r.a.createElement(S,{depTimes:u[null===o||void 0===o?void 0:o.name],closestTimeIndex:_(null===o||void 0===o?void 0:o.name,u,f)}),r.a.createElement(M,{lines:null===(t=n.destinations.find((function(e){return e.port===o})))||void 0===t?void 0:t.lines})):r.a.createElement("div",{className:"destination-port destination-port__loading "},r.a.createElement(D,null))};var I=Object(j.f)((function(e){var t=e.match.params,n=t.dep,a=t.des,o=h.find((function(e){return n===e.url})),i=h.find((function(e){return a===e.url}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{departurePort:o}),r.a.createElement(x,{departurePort:o,destinationPort:i}))})),F=[{path:"/",exact:!0,component:g},{path:"/:dep/:des",exact:!1,component:I},{path:"/:dep",exact:!1,component:I}],H=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(j.c,null,F.map((function(e){return r.a.createElement(j.a,Object.assign({},e,{key:e.path}))})))}}]),t}(a.Component);var B=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"section"},r.a.createElement(H,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(d.a,{basename:"/pontje"},r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.c0d04b4a.chunk.js.map